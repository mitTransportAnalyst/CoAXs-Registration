<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>CoAXs Registration Test Form</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <link href="https://developers.google.com/maps/documentation/javascript/examples/default.css" rel="stylesheet">

    <!-- Optional theme -->
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
 -->
    <!-- Latest compiled and minified JavaScript -->    
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>

    <style type="text/css">
        #map_canvas {
            position: ;
            width: 100%;
            height: 500px;
            margin-top: 10px;
            margin-bottom: 10px;
        }
        
        #current {
            padding-top: 25px;
        }
        
        ul {
            list-style-type: none;
        }

        body {
            margin-left: 10px;
            margin-right: 10px;
        }

        .form-submit {
            position: 50%;

        }

    </style>


</head>

<body>
    <h2>Help us know you better</h2>  
    <form id="input-form" action="" method="POST" target="no-target">
        <fieldset>
          <label>What are your first-last name initials*</label>
          <input id="initials" type="text" name="initials">
        </fieldset>
        
      <section>

        <fieldset>
          <h4> YOUR BACKGROUND </h4>
          <h5>If applicable, choose a field that most closely identify your background and interests</h5>
          <ul>
            <li>
              <label>
                <input type="radio" id="pubPolicy" name="pubPolicy" value="pubPolicy" />
                Public Policy / Administration
              </label>
            </li>
            <li>
              <label>
                <input type="radio" id="urbPlanning" name="urbPlanning" value="urbPlanning" />
                Urban Planning
              </label>
            </li>
            <li>
              <label>
                <input type="radio" id="transPlanning" name="transPlanning" value="transPlanning" />
                Transportation Planning
              </label>
            </li>
            <li>
              <label>
                <input type="radio" id="arch" name="arch" value="arch" />
                Architecture
              </label>
            </li>
            <li>
              <label>
                <input type="radio" id="education" name="education" value="education" />
                Education
              </label>
            </li>
            <li>
              <label>
                <input type="radio" id="healthCare" name="healthCare" value="healthCare" />
                Healthcare
              </label>
            </li>
            <li>
              <label>
                <input type="radio" id="agriculture" name="agriculture" value="agriculture" />
                Agriculture
              </label>
            </li>
            <li>
              <label>
                <input type="radio" id="service" name="service" value="service" />
                Service Industry
              </label>
            </li>
            <li>
              <label>
                <input type="radio" id="techMedia" name="techMedia" value="techMedia" />
                Technology / Media
              </label>
            </li>
            <li>
              <label>
                <input type="radio" id="otherFields" name="otherFields" value="otherFields" />
                Others
              </label>
            </li>
          </ul>
        </fieldset>
      
        <h4> POINT-OF-INTERESTS </h4>
        <fieldset>
          <label>Describe a place that matters to you and drop a marker on the map</label>
          <input id="poiTag" type="text" name="poiTag">
        </fieldset>
      </section>

      <div id='map_canvas'></div>
      
      <button id="form-submit" type="submit" >SUBMIT</button>
    </form>


<!--     Form for Collecting Initials -->
    <script>
        $('#input-form').one('submit',function(){
            var initials = encodeURIComponent($('#initials').val());
            var latitude = encodeURIComponent($('#latitude').val());
            var longitude = encodeURIComponent($('#longitude').val());
            

            var background = encodeURIComponent($('#background').val());
            var poiTag = encodeURIComponent($('#poiTag').val());

            var initialsCol = "entry.1710541390";
            

            var poi = JSON.stringify(markers);
            
            var poiCol = "entry.1709971823";
            
            //var latCol = "";
            //var longCol = "entry.897103553";

      
            var baseURL = 'https://docs.google.com/forms/d/1PrYVTmEaW1UmN5Rx5121VpGnEDne0AT6UWcVzP6B2AE/formResponse?';
            var submitRef = '&submit=Submit';
            var submitURL = (baseURL + initialsCol + "=" + initials + "&" + poiCol + "=" + poi + "&" + submitRef);
            console.log(submitURL);
            $(this)[0].action=submitURL;
            $('#input-name').addClass('active').val('Thank You!');
        });
   
     var markers = [];
        function initialize() {
            var mapOptions = {
              zoom: 13,
              center: new google.maps.LatLng(42.3385, -71.0809),
              mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById('map_canvas'),
                mapOptions);

            google.maps.event.addListener(map, 'click', function(e) {
              placeMarker(e.latLng, map);

              markers.push({"lat": e.latLng.A, "lng": e.latLng.F, "poiTag": $("#poiTag").val()});

                console.log(markers);
            });
        }

        function placeMarker(position, map) {
            var marker = new google.maps.Marker({
              position: position,
              map: map,
              draggable: true
            });
            map.panTo(position);
        }

        google.maps.event.addDomListener(window, 'load', initialize);
    

    </script>


</body>
</html>




